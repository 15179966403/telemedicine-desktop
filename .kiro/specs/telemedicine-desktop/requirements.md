# 需求文档

## 介绍

本项目旨在为互联网医院开发一个基于 Rust+Tauri 和 TypeScript+React 的桌面应用程序。该应用专为医生办公设计，充分利用桌面端多窗口管理的优势，提供高效的患者管理和在线问诊服务。MVP 版本将专注于核心功能：患者管理和在线问诊，后续将逐步迭代添加更多功能模块。

## 需求

### 需求 1 - 医生登录与认证

**用户故事：** 作为医生，我希望能够安全地登录系统，以便访问患者信息和进行在线问诊。

#### 验收标准

1. 当医生输入正确的账号密码时，系统应当允许登录并跳转到工作台
2. 当医生选择短信验证码登录时，系统应当发送验证码并验证输入的验证码
3. 当医生首次登录时，系统应当要求完成实名认证
4. 当登录凭证过期时，系统应当自动跳转到登录页面
5. 如果医生资质未通过审核，系统应当显示审核状态并限制功能访问

### 需求 2 - 患者管理

**用户故事：** 作为医生，我希望能够查看和管理我的患者信息，以便更好地提供医疗服务。

#### 验收标准

1. 当医生访问患者列表时，系统应当显示所有关联的患者信息
2. 当医生搜索患者时，系统应当支持按姓名、病情、就诊时间等条件进行查询
3. 当医生点击患者档案时，系统应当显示历史病历、检查报告和用药记录
4. 当医生为患者添加标签时，系统应当保存标签信息并支持按标签筛选
5. 当医生需要随访时，系统应当支持发送复诊提醒和健康指导

### 需求 3 - 在线问诊接诊

**用户故事：** 作为医生，我希望能够接收和处理在线问诊订单，以便为患者提供远程医疗服务。

#### 验收标准

1. 当有新的问诊订单时，系统应当在待接诊列表中显示并发送通知
2. 当医生查看问诊订单时，系统应当显示患者症状描述和上传的图片/报告
3. 当进行图文问诊时，系统应当支持文字、图片、语音消息的实时交流
4. 当医生需要快速回复时，系统应当提供常用医嘱模板
5. 当医生需要查看患者病史时，系统应当显示既往病历信息

### 需求 4 - 多窗口管理

**用户故事：** 作为医生，我希望能够同时打开多个窗口处理不同的患者，以便提高工作效率。

#### 验收标准

1. 当医生需要同时处理多个患者时，系统应当支持打开多个问诊窗口
2. 当医生在不同窗口间切换时，系统应当保持各窗口的状态和数据
3. 当医生关闭窗口时，系统应当提示保存未完成的操作
4. 当系统资源不足时，系统应当限制同时打开的窗口数量并给出提示
5. 当医生重新打开应用时，系统应当恢复之前的窗口布局

### 需求 5 - 实时通信

**用户故事：** 作为医生，我希望能够与患者进行实时沟通，以便及时了解病情和提供指导。

#### 验收标准

1. 当患者发送消息时，系统应当实时显示在聊天窗口中
2. 当网络连接不稳定时，系统应当自动重连并同步未接收的消息
3. 当医生发送消息失败时，系统应当提示重新发送
4. 当聊天记录过多时，系统应当支持分页加载历史消息
5. 当医生离线时，系统应当在重新上线后同步离线期间的消息

### 需求 6 - 数据安全与隐私

**用户故事：** 作为医生，我希望患者数据得到安全保护，以便符合医疗数据隐私法规。

#### 验收标准

1. 当传输患者数据时，系统应当使用加密协议确保数据安全
2. 当医生访问敏感信息时，系统应当记录操作日志
3. 当医生长时间未操作时，系统应当自动锁定屏幕
4. 当应用关闭时，系统应当清除内存中的敏感数据
5. 当检测到异常访问时，系统应当立即终止会话并记录安全事件

### 需求 7 - 离线功能支持

**用户故事：** 作为医生，我希望在网络不稳定时仍能查看基本信息，以便不影响正常工作。

#### 验收标准

1. 当网络断开时，系统应当允许查看已缓存的患者基本信息
2. 当网络恢复时，系统应当自动同步离线期间的操作
3. 当离线状态下尝试发送消息时，系统应当将消息加入发送队列
4. 当存储空间不足时，系统应当清理过期的缓存数据
5. 当离线时间过长时，系统应当提示医生检查网络连接
